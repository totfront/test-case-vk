{"ast":null,"code":"import _slicedToArray from\"D:/Frontend/Projects/tesk-case-vk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../index.css';import React from'react';import EmojiPopup from'./EmojiPopup/EmojiPopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),emojiPopupState=_React$useState2[0],setEmojiPopupState=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),currentEmoji=_React$useState4[0],setCurrentEmoji=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),currentText=_React$useState6[0],setCurrentText=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),recentEmojis=_React$useState8[0],_setRecentEmojis=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),textAreaEl=_React$useState10[0],setTextAreaEl=_React$useState10[1];var _React$useState11=React.useState(null),_React$useState12=_slicedToArray(_React$useState11,2),selectionPosition=_React$useState12[0],setSelectionPosition=_React$useState12[1];var showEmojiPopup=function showEmojiPopup(e){e.preventDefault();setEmojiPopupState(!emojiPopupState);};var setTextareaContent=function setTextareaContent(e){setCurrentText(e.target.value);};var deafultTextareaHeight='18px';var setTextAreaHeight=function setTextAreaHeight(e){e.target.style.height=deafultTextareaHeight;var scrollHeight=e.target.scrollHeight;e.target.style.height=scrollHeight+'px';};return/*#__PURE__*/_jsx(\"div\",{className:\"input-field__wrapper\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"input-field\",children:[emojiPopupState&&/*#__PURE__*/_jsx(EmojiPopup,{recentEmojis:recentEmojis,popupState:emojiPopupState,onClose:function onClose(){setEmojiPopupState(false);},setRecentEmojis:function setRecentEmojis(emojis){_setRecentEmojis(emojis);},onEmoji:function onEmoji(emoji){setCurrentEmoji(emoji);setCurrentText(currentText.slice(0,selectionPosition)+currentEmoji+currentText.slice(selectionPosition));// всталявляет эмодзи в текущее место каретки\n}}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"1\",className:\"input-field__text-area\",value:currentText,placeholder:\"\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",onClick:function onClick(e){setSelectionPosition(e.target.selectionStart);},onKeyUp:function onKeyUp(e){setTextAreaHeight(e);},onChange:function onChange(e){setTextareaContent(e);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:showEmojiPopup,children:/*#__PURE__*/_jsxs(\"svg\",{className:\"input-field__emoji-image\",xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M6.438 12.297a.9.9 0 011.273.15 2.772 2.772 0 00.516.415c.383.24.97.488 1.773.488.803 0 1.39-.249 1.773-.488a2.773 2.773 0 00.516-.416l.012-.013.002-.003a.9.9 0 011.4 1.132L13 13l.703.562-.001.002-.002.001-.002.004-.007.008-.018.021a3.516 3.516 0 01-.245.254c-.16.15-.394.345-.701.536A5.094 5.094 0 0110 15.15a5.094 5.094 0 01-2.727-.762 4.567 4.567 0 01-.701-.536 3.498 3.498 0 01-.245-.254l-.018-.021-.007-.008-.002-.004-.002-.001s0-.002.702-.564l-.703.562a.9.9 0 01.14-1.265zM8.25 8.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM13 9.5A1.25 1.25 0 1013 7a1.25 1.25 0 000 2.5z\",fill:\"#99A2AD\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M10 .1C4.532.1.1 4.532.1 10s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9S15.468.1 10 .1zM1.9 10a8.1 8.1 0 1116.2 0 8.1 8.1 0 01-16.2 0z\",fill:\"#99A2AD\"})]})})]})});}export default App;","map":{"version":3,"sources":["D:/Frontend/Projects/tesk-case-vk/src/components/App.js"],"names":["React","EmojiPopup","App","useState","emojiPopupState","setEmojiPopupState","currentEmoji","setCurrentEmoji","currentText","setCurrentText","recentEmojis","setRecentEmojis","textAreaEl","setTextAreaEl","selectionPosition","setSelectionPosition","showEmojiPopup","e","preventDefault","setTextareaContent","target","value","deafultTextareaHeight","setTextAreaHeight","style","height","scrollHeight","emojis","emoji","slice","selectionStart"],"mappings":"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","sourcesContent":["import '../index.css'\r\nimport React from 'react'\r\nimport EmojiPopup from './EmojiPopup/EmojiPopup'\r\n\r\nfunction App() {\r\n  const [emojiPopupState, setEmojiPopupState] = React.useState(false)\r\n  const [currentEmoji, setCurrentEmoji] = React.useState('')\r\n  const [currentText, setCurrentText] = React.useState('')\r\n  const [recentEmojis, setRecentEmojis] = React.useState([])\r\n  const [textAreaEl, setTextAreaEl] = React.useState()\r\n  const [selectionPosition, setSelectionPosition] = React.useState(null)\r\n\r\n  const showEmojiPopup = e => {\r\n    e.preventDefault()\r\n    setEmojiPopupState(!emojiPopupState)\r\n  }\r\n  const setTextareaContent = e => {\r\n    setCurrentText(e.target.value)\r\n  }\r\n  const deafultTextareaHeight = '18px'\r\n  const setTextAreaHeight = e => {\r\n    e.target.style.height = deafultTextareaHeight\r\n    const scrollHeight = e.target.scrollHeight\r\n    e.target.style.height = scrollHeight + 'px'\r\n  }\r\n  return (\r\n    <div className='input-field__wrapper'>\r\n      <section className='input-field'>\r\n        {emojiPopupState && (\r\n          <EmojiPopup\r\n            recentEmojis={recentEmojis}\r\n            popupState={emojiPopupState}\r\n            onClose={() => {\r\n              setEmojiPopupState(false)\r\n            }}\r\n            setRecentEmojis={emojis => {\r\n              setRecentEmojis(emojis)\r\n            }}\r\n            onEmoji={emoji => {\r\n              setCurrentEmoji(emoji)\r\n              setCurrentText(currentText.slice(0, selectionPosition) + currentEmoji + currentText.slice(selectionPosition)) // всталявляет эмодзи в текущее место каретки\r\n            }}\r\n          />\r\n        )}\r\n        <textarea\r\n          rows='1'\r\n          className='input-field__text-area'\r\n          value={currentText}\r\n          placeholder='Ваше сообщение'\r\n          onClick={e => {\r\n            setSelectionPosition(e.target.selectionStart)\r\n          }}\r\n          onKeyUp={e => {\r\n            setTextAreaHeight(e)\r\n          }}\r\n          onChange={e => {\r\n            setTextareaContent(e)\r\n          }}\r\n        />\r\n        <button className='btn' onClick={showEmojiPopup}>\r\n          <svg className='input-field__emoji-image' xmlns='http://www.w3.org/2000/svg' width='20' height='20' fill='none'>\r\n            <path d='M6.438 12.297a.9.9 0 011.273.15 2.772 2.772 0 00.516.415c.383.24.97.488 1.773.488.803 0 1.39-.249 1.773-.488a2.773 2.773 0 00.516-.416l.012-.013.002-.003a.9.9 0 011.4 1.132L13 13l.703.562-.001.002-.002.001-.002.004-.007.008-.018.021a3.516 3.516 0 01-.245.254c-.16.15-.394.345-.701.536A5.094 5.094 0 0110 15.15a5.094 5.094 0 01-2.727-.762 4.567 4.567 0 01-.701-.536 3.498 3.498 0 01-.245-.254l-.018-.021-.007-.008-.002-.004-.002-.001s0-.002.702-.564l-.703.562a.9.9 0 01.14-1.265zM8.25 8.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM13 9.5A1.25 1.25 0 1013 7a1.25 1.25 0 000 2.5z' fill='#99A2AD' />\r\n            <path d='M10 .1C4.532.1.1 4.532.1 10s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9S15.468.1 10 .1zM1.9 10a8.1 8.1 0 1116.2 0 8.1 8.1 0 01-16.2 0z' fill='#99A2AD' />\r\n          </svg>\r\n        </button>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n"]},"metadata":{},"sourceType":"module"}